function e(e,r,a,t){Object.defineProperty(e,r,{get:a,set:t,enumerable:!0,configurable:!0})}var r=globalThis.parcelRequire3018,a=r.register;a("d36sf",function(a,t){e(a.exports,"offchainLookupSignature",()=>p),e(a.exports,"offchainLookup",()=>b);var s=r("5UENw"),o=r("hGzrH"),n=r("5pGkz"),c=r("exqIB"),d=r("e9Gwc"),i=r("1tfJf"),l=r("kTOx8"),u=r("01CEa"),f=r("41CuJ");let p="0x556f1830",h={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function b(e,{blockNumber:r,blockTag:a,data:t,to:n}){let{args:u}=(0,c.decodeErrorResult)({data:t,abi:[h]}),[f,p,b,y,g]=u;try{if(!(0,i.isAddressEqual)(n,f))throw new o.OffchainLookupSenderMismatchError({sender:f,to:n});let t=await m({data:b,sender:f,urls:p}),{data:c}=await (0,s.call)(e,{blockNumber:r,blockTag:a,data:(0,l.concat)([y,(0,d.encodeAbiParameters)([{type:"bytes"},{type:"bytes"}],[t,g])]),to:n});return c}catch(e){throw new o.OffchainLookupError({callbackSelector:y,cause:e,data:t,extraData:g,sender:f,urls:p})}}async function m({data:e,sender:r,urls:a}){let t=Error("An unknown error occurred.");for(let s=0;s<a.length;s++){let c=a[s],d=c.includes("{data}")?"GET":"POST",i="POST"===d?{data:e,sender:r}:void 0;try{let a;let s=await fetch(c.replace("{sender}",r).replace("{data}",e),{body:JSON.stringify(i),method:d});if(a=s.headers.get("Content-Type")?.startsWith("application/json")?(await s.json()).data:await s.text(),!s.ok){t=new n.HttpRequestError({body:i,details:a?.error?(0,f.stringify)(a.error):s.statusText,headers:s.headers,status:s.status,url:c});continue}if(!(0,u.isHex)(a)){t=new o.OffchainLookupResponseMalformedError({result:a,url:c});continue}return a}catch(e){t=new n.HttpRequestError({body:i,details:e.message,url:c})}}throw t}}),a("hGzrH",function(a,t){e(a.exports,"OffchainLookupError",()=>c),e(a.exports,"OffchainLookupResponseMalformedError",()=>d),e(a.exports,"OffchainLookupSenderMismatchError",()=>i);var s=r("41CuJ"),o=r("hRZHI"),n=r("k9Ckd");class c extends o.BaseError{constructor({callbackSelector:e,cause:r,data:a,extraData:t,sender:s,urls:o}){super(r.shortMessage||"An error occurred while fetching for an offchain result.",{cause:r,metaMessages:[...r.metaMessages||[],r.metaMessages?.length?"":[],"Offchain Gateway Call:",o&&["  Gateway URL(s):",...o.map(e=>`    ${(0,n.getUrl)(e)}`)],`  Sender: ${s}`,`  Data: ${a}`,`  Callback selector: ${e}`,`  Extra data: ${t}`].flat()}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupError"})}}class d extends o.BaseError{constructor({result:e,url:r}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${(0,n.getUrl)(r)}`,`Response: ${(0,s.stringify)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupResponseMalformedError"})}}class i extends o.BaseError{constructor({sender:e,to:r}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${r}`,`OffchainLookup sender address: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupSenderMismatchError"})}}}),a("1tfJf",function(a,t){e(a.exports,"isAddressEqual",()=>n);var s=r("2VOm9"),o=r("fCd4Y");function n(e,r){if(!(0,o.isAddress)(e,{strict:!1}))throw new s.InvalidAddressError({address:e});if(!(0,o.isAddress)(r,{strict:!1}))throw new s.InvalidAddressError({address:r});return e.toLowerCase()===r.toLowerCase()}});
//# sourceMappingURL=ccip.d2a038e2.js.map
